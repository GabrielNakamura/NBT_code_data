{
  "hash": "03e0262c1ec41d836d765bbcda7d14af",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"The macroecology of knowledge: Spatio-temporal patterns of name-bearing types in biodiversity science\"\nformat: html\neval: FALSE\ndate: 2024-07-24\nauthor:\n  - name: Gabriel Nakamura\n    orcid: 0000-0002-5144-5312\n  - name: Lívia Estéfane F. Frateles\n    orcid: 0000-0003-0644-5425\n  - name: Bruno H. Mioto Stabile\n    orcid: 0000-0002-3524-537X\n  - name: Matheus Lima de Araujo\n    orcid: 0000-0002-9111-725X\n  - name: Emanuel Neuhaus\n    orcid: 0000-0002-5966-7585\n  - name: Manoela Maria Ferreira Marinho\n    orcid: 0000-0003-4226-666X\n  - name: Melina de Souza Leite\n    orcid: 0000-0003-0505-0667\n  - name: Aline Richter\n    orcid: 0000-0001-6385-153X\n  - name: Liuyong Ding\n    orcid: 0000-0002-5490-182X\n  - name: Tiago Magalhães da Silva Freitas\n    orcid: 0000-0003-3203-3408\n  - name: Bruno Eleres Soares\n    orcid: 0000-0001-5678-0403\n  - name: Weferson Júnio da Graça\n    orcid: 0000-0002-8925-5629\n  - name: José Alexandre Felizola Diniz-Filho\n    orcid: 0000-0002-0967-9684\n---\n\n\n::: callout-note\nThis manuscript is submitted as a preprint here: Link\n:::\n\n# General overview\n\nThis repository contains the data and code used in the analysis of the manuscript entitled **\"The macroecology of knowledge: Spatio-temporal patterns of name-bearing types in biodiversity science\"**.\n\nIn this study we characterized different aspects of spatial and temporal patterns of fish Name Bearing Types (NBT) among countries and world regions. The characteristics comprises the number of total NBT, the NBT flowing among different world regions, the characteristics of regions and countries regarding the source of NBT in their biological collection, the level of underepresentation of native species and the level of overepresentation of non-native species for each country.\n\nWe discuss how the fundamental knowledge in fish species is distributed and its implications for science development and knowledge sharing.\n\n# Repository structure\n\n## data\n\nThis folder stores raw and processed data used to perform all the analysis presented in this study\n\n### raw\n\n-   `flow_period_region_country.csv` a data frame in the long format containing the flowing of NBT per regions per per time (50-year time frame). Variables:\n\n    -   `period` numeric variable representing 50-year time intervals\n\n    -   `region_type` character representing the name of the World Bank region of the country where the NBT was sourced\n\n    -   `country_type` character. A three letter code (alpha-3 ISO3166) representing the country of the museum where the NBT was sourced\n\n    -   `region_museum` character. Name of the World Bank region of the country where the NBT is housed\n\n    -   `country_museum` character. A three letter code (alpha-3 ISO3166) representing the country of the museum where the NBT is housed\n\n    -   `n` numeric. The number of NBT flowing from one country to another\n\n-   `spp_native_distribution.csv` data frame in the long format containing the native composition at the country level. Variables:\n\n    -   `species` character. The name of a species in the format genus_epithet according to the Catalog of Fishes (including synonym names)\n\n    -   `country_distribution` character. Three letter code (alpha-3 ISO3166) indicating the name of the country where a species is native to\n\n    -   `region_distribution` character. The name of the region acording with World Bank where a species is native to\n\n-   `spp_type_distribution.csv` data frame in the long format containing the composition of NBT by country. Variables:\n\n    -   `species` character. The name of a species in the format genus_epithet according to the Catalog of Fishes (including synonym names)\n\n    -   `country_distribution` character. Three letter code (alpha-3 ISO3166) indicating the name of the country where a species is housed\n\n    -   `region_distribution` character. The name of the region acording with World Bank where a species is housed\n\n-   `bio-dem_data.csv` data frame with data downloaded from [Bio-Dem](https://bio-dem.surge.sh/#awards) containing information on biological and social information at the country level. Variables:\n\n    -   `country` character. A three letter code (alpha-3 ISO3166) representing a country\n\n    -   `records` numeric. Total number of species occurrence records from Global Biodiverity Facility (GBIF)\n\n    -   `records_per_area` numeric. Records per area from gbif\n\n    -   `yearsSinceIndependence` numeric. Years since independence for each country\n\n    -   `e_migdppc` numeric. GDP per capta\n\n-   `museum_data.csv` data frame with museums' acronyms and the world region of each. Variables:\n\n    -   `code_museum` character. The acronym (three letter code) of the museum\n\n    -   `country_museum` character. A three letter code (alpha-3 ISO3166) representing a country\n\n    -   `region_museum` character. The name of the region acording with World Bank\n\n### processed\n\n-   `flow_region.csv` a data frame containing flowing of NBT among world regions and the total number of NBT derived from the source region\n\n-   `flow_period_region.csv` a data frame with the number of NBT between the world regions per 50-year time frame and the total number of NBT in each time frame for each world region\n\n-   `flow_period_region_prop.csv` a data frame with the number of NBT, the Domestic Contribution and Domestic Retention between the world regions in a 50-year time frame\n\n-   `flow_region_prop.csv` data with the total number of species flowing between world regions, Domestic Contribution and Domestic Retention\n\n-   `flow_country.csv` data frame with flowing information of NBT among countries\n\n-   `df_country_native.csv` data frame with the number of native species at the country level\n\n-   `df_country_type.csv` data frame with the number of NBT at the country level\n\n-   `df_endemic_beta.csv` data frame with values of native and NBT turnover at the country level using only species with restricted occurrences at the country level\n\n-   `df_all_beta.csv` data frame with values of native and NBT turnover at the country level. This is used in the analysis of Supplementary material\n\n## R\n\nThe letters `D`, `A` and `V` represents scripts for, respectively, data processing (D), data analysis (A) and results visualization (V). The script sequence to reproduce the workflow is indicated by the numbers at the beginning of the name of the script file.\n\n![](scripts_diagram.png)\n\n-   [`01_D_data_preparation.qmd`](R/01_D_data_preparation.qmd) initial data preparation\n\n-   [`02_A_beta-endemics-countries.qmd`](R/02_A_beta-endemics-countries.qmd) analysis of beta diversity metrics. This script is used to calculate `turnover NBT` and `native NBT`\n\n-   [`03_D_data_preparation_models.qmd`](R/03_D_data_preparation_models.qmd) script used to build data frames that will be used in statistical models ([`04_A_model_NBTs.qmd`](R/04_A_model_NBTs.qmd))\n\n-   [`04_A_model_NBTs.qmd`](R/04_A_model_NBTs.qmd) statistical models for the total number of NBT, native and NBT turnover, Domestic Contribution and Domestic Retention\n\n-   [`05_V_chord_diagram_Fig1.qmd`](R/05_V_chord_diagram_Fig1.qmd) code used to produce circular flow diagram. This is the Figure 1 of the study\n\n-   [`06_V_world_map_Fig1.qmd`](R/06_V_world_map_Fig1.qmd) code used to produce the world map in the Figure 1 of the main text\n\n-   [`07_V_scatterplot_Fig2.qmd`](R/07_V_scatterplot_Fig2.qmd) code used to reproduce the Figure 2 of the main text\n\n-   [08_V_beta_endemics_Fig3.qmd](R/08_V_beta_endemics_Fig3.qmd) code used to build Figure 3 of the main text\n\n-   [`09_V_model_Fig4.qmd`](R/09_V_model_Fig4.qmd) code used to build the Figure 4 of the main text. This is the representation of the results of the models present in the script [04_A_model_NBTs.qmd](R/04_A_model_NBTs.qmd)\n\n-   [`0010_Supplementary_analysis.qmd`](R/0010_Supplementary_analysis.qmd) code to produce all the tables and figures presented in the Supplementary material of this study\n\n<!-- -   [`0011_V_beta_all_FigS3.qmd`](R/0011_V_beta_all_FigS3.qmd) code to produce the Figure S3 in the supplementary material producing a cartogram with countries coloured accoridng to its native and NBT turnover values, considering all species -->\n\n### functions\n\n-   [`function_beta_types_success_fail.R`]() function used to calculate turnover metrics.\n\n-   [`function_scale_back.R`]() function used to transform back normalized variables\n\n## output\n\n### Figures\n\nIn this folder you will find all figures used in the main text and supplementary material of this study\n\n`Fig1_flow_circle_plot.png` Figure with circular plots showing the flux of NBT among regions of the world in a 50-year time window\n\n`Fig2_DC_DR.png` Scaterplot with World regions characterized by their Domestic Contribution and Domestic Retention values in a 50-year time frame\n\n`Fig3_turnover_metrics_endemics.png` Cartogram with 3 maps showing the level of native endemic turnover, NBT turnover and the combination of both metrics in a combined map\n\n`Fig4_models.png` Figure showing the predictions of the number of NBT, DC, DR, native turnover and NBT turnover for different predictors. This is derived from the statistical models\n\n#### Supp-material\n\nThis folder contains the figures in the Supplementary material\n\n-   `FigS1_native_richness.png` World map with countries coloured according to the number of native species richness according to the Catalog of Fishes\n\n-   `FigS2_scatterplot.png` All-time Domestic contribution (DC) and Domestic retention (DR) for world regions\n\n-   `FigS3_turnover_metrics.png` Cartogram with 3 maps showing the level of native turnover, NBT turnover and the combination of both metrics in a combined map\n\n## Packages\n\n| Package       | Version                                                | Documentation                                                             |\n|---------------|---------------|------------------------------------------|\n| bbmle         | 1.0.25.1                                               | [bbmle](https://cran.r-project.org/web/packages/bbmle/bbmle.pdf)          |\n| betapart      | 1.6                                                    | [betapart](https://cran.r-project.org/web/packages/betapart/betapart.pdf) |\n| biscale       | 1.0.0                                                  | [biscale](https://chris-prener.github.io/biscale/)                        |\n| circlize      | 0.4.15                                                 | [circlize](https://jokergoo.github.io/circlize_book/book/)                |\n| countrycode   | 1.6.0                                                  | [countrycode](https://vincentarelbundock.github.io/countrycode/#/)        |\n| cowplot       | 1.1.1                                                  | [cowplot](https://wilkelab.org/cowplot/)                                  |\n| DHARMa        | 0.4.6                                                  | [DHARMa](https://florianhartig.github.io/DHARMa/)                         |\n| dplyr         | 1.1.4                                                  | [dplyr](https://dplyr.tidyverse.org)                                      |\n| ggarrow       | 0.0.0.9000                                             | [ggarrow](https://teunbrand.github.io/ggarrow/)                           |\n| ggplot2       | 3.5.0                                                  | [ggplot2](https://ggplot2.tidyverse.org)                                  |\n| glmmTMB       | 1.1.8                                                  | [glmmTMB](https://glmmtmb.github.io/glmmTMB/)                             |\n| glue          | 1.6.2                                                  | [glue](https://glue.tidyverse.org)                                        |\n| here          | 1.0.1                                                  | [here](https://here.r-lib.org)                                            |\n| patchwork     | 1.2.0.9000                                             | [patchwork](https://patchwork.data-imaginist.com)                         |\n| performance   | 0.12.1                                                 | [performance](https://easystats.github.io/performance/)                   |\n| phyloregion   | 1.0.8                                                  | [phyloregion](https://phyloregion.com)                                    |\n| readr         | 2.1.4                                                  | [readr](https://readr.tidyverse.org)                                      |\n| rmapshaper    | 0.5.0                                                  | [rmapshaper](https://andyteucher.ca/rmapshaper/)                          |\n| rnaturalearth | 0.3.4                                                  | [rnaturalearth](https://ropensci.github.io/rnaturalearth/)                |\n| scales        | [1.3\\@420](https://github.com/r-lib/scales/pull/420)\\* | [scales](https://scales.r-lib.org)                                        |\n| sf            | 1.0-14                                                 | [sf](https://r-spatial.github.io/sf/)                                     |\n| tidyr         | 1.3.1                                                  | [tidyr](https://tidyr.tidyverse.org)                                      |\n\n\\* Pull request 420 version\n\n# Contact\n\n[Gabriel Nakamura](https://github.com/GabrielNakamura) and [Bruno Mioto](https://github.com/brunomioto)\n\nIf you have any suggestion or commentary, please open an issue\n\n[Source code](https://github.com/GabrielNakamura/NBT_code_data)\n\n# Session Info\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsessionInfo()\n#> R version 4.3.2 (2023-10-31 ucrt)\n#> Platform: x86_64-w64-mingw32/x64 (64-bit)\n#> Running under: Windows 10 x64 (build 19045)\n#> \n#> Matrix products: default\n#> \n#> \n#> locale:\n#> [1] LC_COLLATE=Portuguese_Brazil.utf8  LC_CTYPE=Portuguese_Brazil.utf8   \n#> [3] LC_MONETARY=Portuguese_Brazil.utf8 LC_NUMERIC=C                      \n#> [5] LC_TIME=Portuguese_Brazil.utf8    \n#> \n#> time zone: Etc/GMT+3\n#> tzcode source: internal\n#> \n#> attached base packages:\n#> [1] stats4    stats     graphics  grDevices utils     datasets  methods  \n#> [8] base     \n#> \n#> other attached packages:\n#>  [1] biscale_1.0.0        cowplot_1.1.1        patchwork_1.2.0.9000\n#>  [4] ggarrow_0.0.0.9000   rmapshaper_0.5.0     sf_1.0-14           \n#>  [7] rnaturalearth_0.3.4  circlize_0.4.15      DHARMa_0.4.6        \n#> [10] bbmle_1.0.25.1       performance_0.12.1   glmmTMB_1.1.8       \n#> [13] ggplot2_3.5.0        scales_1.3.0.9000    countrycode_1.6.0   \n#> [16] phyloregion_1.0.8    readr_2.1.4          here_1.0.1          \n#> [19] glue_1.6.2           tidyr_1.3.1          dplyr_1.1.4         \n#> \n#> loaded via a namespace (and not attached):\n#>  [1] DBI_1.1.3           phangorn_2.11.1     sandwich_3.0-2     \n#>  [4] rlang_1.1.2         magrittr_2.0.3      multcomp_1.4-25    \n#>  [7] predicts_0.1-11     e1071_1.7-13        compiler_4.3.2     \n#> [10] mgcv_1.9-0          vctrs_0.6.4         quadprog_1.5-8     \n#> [13] pkgconfig_2.0.3     shape_1.4.6         fastmap_1.1.1      \n#> [16] clustMixType_0.3-9  utf8_1.2.4          rmarkdown_2.26     \n#> [19] tzdb_0.4.0          nloptr_2.0.3        purrr_1.0.2        \n#> [22] xfun_0.43           reprex_2.0.2        jsonlite_1.8.8     \n#> [25] styler_1.10.2       terra_1.7-55        parallel_4.3.2     \n#> [28] R6_2.5.1            RColorBrewer_1.1-3  boot_1.3-28.1      \n#> [31] numDeriv_2016.8-1.1 estimability_1.4.1  Rcpp_1.0.11        \n#> [34] knitr_1.46          zoo_1.8-12          R.utils_2.12.2     \n#> [37] Matrix_1.6-2        splines_4.3.2       R.cache_0.16.0     \n#> [40] igraph_2.0.3        tidyselect_1.2.1    rstudioapi_0.16.0  \n#> [43] yaml_2.3.8          TMB_1.9.10          codetools_0.2-19   \n#> [46] curl_5.1.0          lattice_0.22-5      tibble_3.2.1       \n#> [49] withr_3.0.0         coda_0.19-4.1       evaluate_0.23      \n#> [52] survival_3.5-7      units_0.8-4         proxy_0.4-27       \n#> [55] pillar_1.9.0        KernSmooth_2.23-22  smoothr_1.0.1      \n#> [58] insight_0.20.2      generics_0.1.3      rprojroot_2.0.4    \n#> [61] sp_2.1-3            maptpx_1.9-7        hms_1.1.3          \n#> [64] munsell_0.5.0       minqa_1.2.6         xtable_1.8-4       \n#> [67] class_7.3-22        slam_0.1-50         emmeans_1.8.9      \n#> [70] tools_4.3.2         lme4_1.1-35.1       fs_1.6.3           \n#> [73] mvtnorm_1.2-3       fastmatch_1.1-4     grid_4.3.2         \n#> [76] ape_5.8             bdsmatrix_1.3-6     colorspace_2.1-0   \n#> [79] nlme_3.1-163        cli_3.6.1           fansi_1.0.6        \n#> [82] V8_4.4.0            gtable_0.3.4        R.methodsS3_1.8.2  \n#> [85] digest_0.6.33       classInt_0.4-10     TH.data_1.1-2      \n#> [88] htmltools_0.5.8.1   R.oo_1.25.0         lifecycle_1.0.4    \n#> [91] httr_1.4.7          GlobalOptions_0.1.2 MASS_7.3-60\n```\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}